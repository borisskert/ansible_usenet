---
version: "3.2"
services:
  sabnzbd:
    image: ghcr.io/linuxserver/sabnzbd:{{ usenet_sabnzbd_version }}
    container_name: sabnzbd
    environment:
      - PUID={{ usenet_user_id }}
      - PGID={{ usenet_group_id }}
      - TZ=Europe/London
    volumes:
      - {{ usenet_sabnzbd_config_volume_directory }}:/config
      - {{ usenet_sabnzbd_downloads_volume_directory }}:/downloads
      - {{ usenet_sabnzbd_incomplete_downloads_volume_directory }}:/incomplete-downloads
    ports:
      - {{ usenet_sabnzbd_network_interface }}:{{ usenet_sabnzbd_http_port }}:8080
      - {{ usenet_sabnzbd_network_interface }}:{{ usenet_sabnzbd_https_port }}:9090
    restart: unless-stopped

  sonarr:
    image: ghcr.io/linuxserver/sonarr:{{ usenet_sonarr_version }}
    container_name: sonarr
    environment:
      - PUID={{ usenet_user_id }}
      - PGID={{ usenet_group_id }}
      - TZ=Europe/London
      - UMASK_SET=022
    depends_on:
      - sabnzbd
    volumes:
      - {{ usenet_sonarr_config_volume_directory }}:/config
      - {{ usenet_sonarr_tv_volume_directory }}:/tv
      - {{ usenet_sonarr_downloads_volume_directory }}:/downloads
    ports:
      - {{ usenet_sonarr_network_interface }}:{{ usenet_sonarr_http_port }}:8989
    restart: unless-stopped
  plex:
    image: ghcr.io/linuxserver/plex:{{ usenet_plex_version }}
    container_name: plex
    network_mode: host
    environment:
      - PUID={{ usenet_user_id }}
      - PGID={{ usenet_group_id }}
      - VERSION=docker
      - UMASK_SET=022
    volumes:
      - {{ usenet_plex_config_volume_directory }}:/config
      - {{ usenet_plex_tv_volume_directory }}:/tv
      - {{ usenet_plex_movies_volume_directory }}:/movies
{% if usenet_plex_intel_hardware_acceleration | bool %}
    devices:
      - /dev/dri:/dev/dri
{% endif %}
    restart: unless-stopped
